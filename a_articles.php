<?php session_start(); ?><!DOCTYPE HTML><html lang="fr">   <head>       <title>Administration - Articles</title>		<meta charset="UTF-8">		<meta name="google-site-verification" content="KP57BpZEznIYu8Q8mPfLb7GkntURtqD8NyhnKgCBWDo" />	   <meta name="keywords" content="Cyril, Francesconi, 95225, Supinfo, Grand Quevilly, Grand-Quevilly, CV, site personnel, Tutoriels">	   <meta name="description" content="Vous êtes dans la section administrative. ">	   <?php include("head.php"); ?>   </head>   <body>		<?php include("menu.php"); ?>	<div id="page">		<div id="content">						<!--Formulaire caché pour envoyer l'id de la ligne cliquée-->			<form id="renvoi" method="post" action="a_articles.php" class="hidden";>				<input type="hidden" id="ident" name="ident" value="" />			</form>						<script type="text/javascript"> 				//Si le bouton de suppression est cliqué on envoit l'id de la ligne à supprimer, aprés confirmation.				function del(id)				{					if (confirm("Etes vous sûr de vouloir supprimer cette news ?"))					{						document.getElementById('ident').value = id;						document.getElementById('renvoi').submit();					}				}			</script>						<?php 					require 'config.php';				//On vérifie que la session est crée				if(isset($_SESSION['login']) AND isset($_SESSION['password']))				{					//On vérifie encore l'authentification pour éviter le cas ou quelqu'un ne crée une session anonyme					if( $_SESSION['login'] == 'cyril' AND $_SESSION['password'] == DB_PASS1)					{						try						{							$conn = new PDO('mysql:host='.DB_HOST .';dbname='.DB_BDD .'', ''.DB_LOGIN .'', ''.DB_PASS .'');						}													catch(Exception $e)						{							die('Erreur : ' .$e->getMessage());						}												//Si une suppression a était demandé, on supprime.						if( isset($_POST['ident']))						{							$ident = $_POST['ident'];									$sql = $conn->prepare('DELETE FROM news WHERE id=:id');							$sql->execute(array('id' => $ident));						}						?>							<div class="left">								<a href="a_index.php"><img src="images/fleche_left.png" alt="fleche"></img></a>							</div><br/>														<div class="select_articles" onClick="window.location.href='a_edit.php?id=-1';">									<div class="title">									Creer un nouvel article.								</div><br/><br />								<div class="content">									Utiliser cette section pour créer un nouvel article facilement grâce à l'éditeur.								</div>							</div>						<?php						//Puis on affiche la liste des articles.						$sql = $conn->prepare('SELECT title, content, date, id FROM news ORDER BY id desc');						$sql->execute();												while ($data = $sql->fetch())						{							?>							<div class ="button">								<button type="button" onclick="del(<?php echo $data['id'];?>)"><img height="10px" width="10px" src="images/wrong.png"></button>							</div>										<div class="select_articles" onClick="window.location.href='a_edit.php?id=<?php echo $data['id'];?>';">																	<div class="title">									<?php echo $data['title'] ?>								</div><br/><br />								<div class="content">									<?php echo substr($data['content'], 0, 500); ?>								</div>								<div class="tright">									<?php echo date("d-m-Y H:i",strtotime($data['date'])); ?>								</div>							</div>							<?php						}					}				}								//Sinon, si le login et le mdp ne sont pas rentrés, on affiche le formulaire de connexion par défaut.				else					echo "<script type='text/javascript'>document.location.replace('a_index.php');</script>";?>						</div>	</div>	<?php include("footer.php"); ?>	   </body></html>